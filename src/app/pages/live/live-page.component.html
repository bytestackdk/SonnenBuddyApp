<ion-header class="ion-no-border" translucent="true">
  <ion-toolbar>
    <ion-title>Live</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" fullscreen="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Live</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-grid class="live-view">
    <ion-row>
      <ion-col></ion-col>
      <ion-col>
        <div class="ion-flex ion-flex-column ion-align-items-center gap-1">
          <app-utilization class="utilization-bar" [percent]="solarUtilization$ | async"></app-utilization>
          <img src="assets/ph.svg" class="flow-item" alt="Solar" />
          <div>{{ solarProduction$ | async | kw }}</div>
        </div>
      </ion-col>
      <ion-col></ion-col>
    </ion-row>
    <ion-row class="box ion-padding ion-margin">
      <ion-col>
        <div class="ion-flex ion-flex-column ion-align-items-center gap-1">
          <app-utilization class="utilization-bar" [percent]="batteryUtilization$ | async"></app-utilization>
          <app-battery class="battery" [percent]="batteryCharge$ | async"></app-battery>
          <div>{{ batteryCharge$ | async }}%</div>
          <div>{{ batteryUsage$ | async | kw }}</div>
          <div>{{ batteryRemaining$ | async | kw }}h</div>
        </div>
      </ion-col>
      <ion-col class="ion-flex ion-flex-column ion-justify-content-end ion-align-items-center gap-1">
        <img src="assets/sonnen-logo.svg" class="svg-icon logo" alt="Logo" />
      </ion-col>
      <ion-col>
        <div class="ion-flex ion-flex-column ion-align-items-center gap-1">
          <app-utilization class="utilization-bar" [percent]="inverterUtilization$ | async"></app-utilization>
          <img src="assets/sonnen.svg" class="svg-icon inverter" alt="Inverter" />
          <div>{{ inverterUsage$ | async | kw }}</div>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col></ion-col>
      <ion-col>
        <div class="ion-flex ion-flex-column ion-align-items-center gap-1">
          <img src="assets/house.svg" class="svg-icon" alt="Home" />
          <div>{{ houseConsumption$ | async | kw }}</div>
        </div>
      </ion-col>
      <ion-col></ion-col>
    </ion-row>
    <ion-row>
      <ion-col></ion-col>
      <ion-col></ion-col>
      <ion-col>
        <div class="ion-flex ion-flex-column ion-align-items-center gap-1">
          <img src="assets/grid.svg" class="svg-icon grid" alt="Grid" />
          <div>{{ gridFeedIn$ | async | kw }}</div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <br /><br /><br /><br />

  <!--      &lt;!&ndash;      <app-power-square&ndash;&gt;-->
  <!--      &lt;!&ndash;        class="power-1"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [right]="true"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [bottom]="true"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [direction]="facade.vm.solarToBattery$ | async"&ndash;&gt;-->
  <!--      &lt;!&ndash;      ></app-power-square>&ndash;&gt;-->
  <!--      &lt;!&ndash;      <app-power-square&ndash;&gt;-->
  <!--      &lt;!&ndash;        class="power-1"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [left]="true"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [bottom]="true"&ndash;&gt;-->
  <!--      &lt;!&ndash;        [direction]="facade.vm.solarToInverter$ | async"&ndash;&gt;-->
  <!--      &lt;!&ndash;      ></app-power-square>&ndash;&gt;-->

  <div class="ion-flex ion-flex-column ion-align-items-center gap-2">
    <div class="ion-flex">
      <img src="assets/ph.svg" class="svg-icon" alt="Solar" />
      <div class="ion-padding-horizontal">
        <app-utilization class="utilization" [percent]="solarUtilization$ | async"></app-utilization>
        <div>Utilization: {{ solarUtilization$ | async | number : "1.0-0" }} %</div>
        <div>Capacity: {{ solarCapacity$ | async | kw }}</div>
        <div>Production: {{ solarProduction$ | async | kw }}</div>
        <div>Solar to battery: {{ solarToBattery$ | async }}</div>
        <div>Solar to inverter: {{ solarToInverter$ | async }}</div>
      </div>
    </div>
    <div class="ion-flex">
      <app-battery class="battery" [percent]="batteryCharge$ | async"></app-battery>
      <div class="ion-padding-horizontal">
        <app-utilization class="utilization" [percent]="batteryUtilization$ | async"></app-utilization>
        <div>Utilization: {{ batteryUtilization$ | async | number : "1.0-0" }} %</div>
        <div>Usage: {{ batteryUsage$ | async | kw }}</div>
        <div>Charge: {{ batteryCharge$ | async }}% / {{ batteryRemaining$ | async | kw }}h</div>
        <div *ngIf="batteryCharging$ | async">Charging time: {{ batteryChargingTime$ | async }}</div>
        <div *ngIf="batteryDischarging$ | async">Discharge time: {{ batteryDischargingTime$ | async }}</div>
        <div>Battery to inverter: {{ batteryToInverter$ | async }}</div>
      </div>
    </div>
    <div class="ion-flex">
      <img src="assets/sonnen.svg" class="svg-icon" alt="Inverter" />
      <div class="ion-padding-horizontal">
        <app-utilization class="utilization" [percent]="inverterUtilization$ | async"></app-utilization>
        <div>Utilization: {{ inverterUtilization$ | async | number : "1.0-0" }} %</div>
        <div>Usage: {{ inverterUsage$ | async | kw }}</div>
        <div>Inverter to battery: {{ inverterToBattery$ | async }}</div>
        <div>Inverter to house: {{ inverterToHouse$ | async }}</div>
        <div>Inverter to grid: {{ inverterToGrid$ | async }}</div>
      </div>
    </div>
    <div class="ion-flex">
      <img src="assets/house.svg" class="svg-icon" alt="Home" />
      <div class="ion-padding-horizontal">
        <div>Consumption: {{ houseConsumption$ | async | kw }}</div>
      </div>
    </div>
    <div class="ion-flex">
      <img src="assets/grid.svg" class="svg-icon" alt="Grid" />
      <div class="ion-padding-horizontal">
        <div>Grid feed in: {{ gridFeedIn$ | async | kw }}</div>
        <div>Grid to house: {{ gridToHouse$ | async }}</div>
      </div>
    </div>
  </div>

  <!--  <ion-button (click)="findDevices()">Find sonnen-batterie</ion-button>-->
  <!--  <ion-button (click)="setToken()">Set token</ion-button>-->
  <!--  <ion-button (click)="setPanelCapacity(6000)">Set 6 kW</ion-button>-->
  <!--  <ion-button (click)="getStatus()">Get status</ion-button>-->
  <!--  <ion-button (click)="getLatestData()">Get data</ion-button>-->
  <!--  <ion-button (click)="getPowerMeter()">Get power</ion-button>-->
  <!--  <ion-button (click)="getInverterMaxPower()">Get inverter max</ion-button>-->
  <!--  <ion-button (click)="getBatteryQuantity()">Get battery quantity</ion-button>-->
  <!--  <ion-button (click)="getBatteryModuleCapacity()">Get battery capacity</ion-button>-->

  <!--  <h2>Device</h2>-->
  <!--  <pre>{{ device$ | async | json }}</pre>-->

  <!--  <h2>Status</h2>-->
  <!--  <pre>{{ status$ | async | json }}</pre>-->

  <!--  <h2>Latest data</h2>-->
  <!--  <pre>{{ latestData$ | async | json }}</pre>-->

  <!--  <h2>Power meter</h2>-->
  <!--  <pre>{{ powerMeter$ | async | json }}</pre>-->
</ion-content>
